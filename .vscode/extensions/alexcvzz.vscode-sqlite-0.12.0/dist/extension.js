module.exports=function(e){var t={};function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=15)}([function(e,t){e.exports=require("vscode")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(6);var i;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR"}(i=t.Level||(t.Level={}));t.logger=new class{constructor(){this.logLevel=i.INFO,this.outputChannel=r.window.createOutputChannel(""+n.Constants.outputChannelName)}setLogLevel(e){this.logLevel=e}debug(e){this.log(""+e.toString(),i.DEBUG)}info(e){this.log(""+e.toString(),i.INFO)}warn(e){this.log(""+e.toString(),i.WARN)}error(e){this.log(""+e.toString(),i.ERROR)}output(e){this.outputChannel.appendLine(e.toString())}showOutput(){this.outputChannel.show()}getOutputChannel(){return this.outputChannel}log(e,t){switch(e=`[${(new Date).toLocaleTimeString()}][${n.Constants.extensionName}][${t}] ${e}`,t){case i.ERROR:console.error(e);break;case i.WARN:console.warn(e);break;case i.INFO:console.info(e);break;default:console.log(e)}this.logLevel&&function(e,t){switch(t){case i.ERROR:return e===i.ERROR;case i.WARN:return e===i.WARN||e===i.ERROR;case i.INFO:return e===i.INFO||e===i.WARN||e===i.ERROR;case i.DEBUG:return!0;default:return e===i.INFO||e===i.WARN||e===i.ERROR}}(t,this.logLevel)&&this.output(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.showOutputChannel="sqlite.showOutputChannel",e.runDocumentQuery="sqlite.runDocumentQuery",e.runSelectedQuery="sqlite.runSelectedQuery",e.useDatabase="sqlite.useDatabase",e.explorerAdd="sqlite.explorer.add",e.explorerRemove="sqlite.explorer.remove",e.explorerRefresh="sqlite.explorer.refresh",e.explorerCopyName="sqlite.explorer.copyName",e.explorerCopyPath="sqlite.explorer.copyPath",e.explorerCopyRelativePath="sqlite.explorer.copyRelativePath",e.newQuery="sqlite.newQuery",e.newQuerySelect="sqlite.newQuerySelect",e.newQueryInsert="sqlite.newQueryInsert",e.quickQuery="sqlite.quickQuery",e.runTableQuery="sqlite.runTableQuery",e.runSqliteMasterQuery="sqlite.runSqliteMasterQuery",e.changeWorkspaceTrust="sqlite.changeWorkspaceTrust",e.askWorkspaceTrust="sqlite.askWorkspaceTrust",e.reloadSettings="sqlite.reloadSettings"}(t.Commands||(t.Commands={}))},function(e,t){e.exports=require("path")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(11),n=new Set(r.keywords);function i(e){let t=e.map(e=>o(e,8,16)).join(""),s=new Buffer(t,"hex").toString("utf8");for(let e=0;e<s.length;e++)if(65533===s.charCodeAt(e))return t;return s}function o(e,t,s){return"number"==typeof e&&(e=e.toString()),parseInt(e,t).toString(s)}function a(e,t){let s=Array.from(t),r=!1,n=null,i=[];for(let t=0;t<s.length;t++){let o=s[t],a=t>0?s[t-1]:null,l=t<s.length?s[t+1]:null;"\\"===a||"'"!==o&&'"'!==o||!1!==r?"\\"===a||o!==n||!0!==r?(1===e.length?o!==e:o!==e[0]||l!==e[1])||!1!==r||i.push(t):(r=!1,n=null):(r=!0,n=o)}return i}t.sanitizeStringForHtml=function(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;","/":"&#x2F;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>\/"']/g,e=>t[e])},t.sqlSafeName=function(e){return/^[A-Za-z_]\w*$/.test(e)&&!n.has(e.toUpperCase())?e:`\`${e.replace(/`/g,"``")}\``},t.replaceEscapedOctetsWithChar=function(e){return e.replace(/(?:^|[^\\])((?:\\[0-9]{3})+)/g,(e,...t)=>{let s=t[0].toString(),r="";e.length>s.length&&(r=e[0]);let n=s.split("\\").filter(e=>""!==e.trim());try{return r+i(n)}catch(t){return e}})},t.octalToChars=i,t.convertFromBaseToBase=o,t.splitArrayByCondition=function(e,t){let s=[];return e.forEach(e=>{t(e)||s===[]?s.push([e]):s[s.length-1].push(e)}),s},t.findNotInString=a,t.splitNotInString=function(e,t){let s=a(e,t),r=[];return s.forEach((n,i)=>{let o=i>0?s[i-1]+e.length:0,a=t.substring(o,n);r.push(a)}),r.push(t.substring(s===[]?0:s[s.length-1]+e.length)),r},t.randomString=function(e,t=!1){let s="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t&&(r+="èé+*][ò@à#°ù§-_!£$%&/()=<>^ì?");for(var n=0;n<e;n++)s+=r.charAt(Math.floor(Math.random()*r.length));return s},t.queryObject=function(e,t){let s=e,r=t.split("/").filter(e=>""!==e);for(;;){let e=r.shift();if(!e||!s)break;s=s[e]}return s},t.uniqueBy=function(e,t){var s={};return e.filter(e=>{let r=e[t];return(!r||!s.hasOwnProperty(r))&&(s[r]=!0)})}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(31);t.pickListDatabase=r.pickListDatabase,t.pickWorkspaceDatabase=r.pickWorkspaceDatabase;const n=s(32);t.showQueryInputBox=n.showQueryInputBox;const i=s(33);t.createSqlDocument=i.createSqlDocument,t.getEditorSqlDocument=i.getEditorSqlDocument,t.getEditorSelection=i.getEditorSelection;const o=s(34);t.showErrorMessage=o.showErrorMessage,t.showWarningMessage=o.showWarningMessage},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(8);!function(e){e.extensionName=r.name,e.extensionDisplayName=r.displayName,e.extensionVersion=r.version,e.outputChannelName=""+e.extensionDisplayName,e.sqliteExplorerViewId=r.contributes.views.explorer[0].id}(t.Constants||(t.Constants={}))},function(e,t){e.exports=require("os")},function(e){e.exports=JSON.parse('{"name":"vscode-sqlite","icon":"resources/icon/icon_128x128.png","displayName":"SQLite","description":"Explore and query SQLite databases.","version":"0.12.0","publisher":"alexcvzz","repository":{"url":"https://github.com/AlexCovizzi/vscode-sqlite","type":"git"},"engines":{"vscode":"^1.30.0"},"categories":["Other"],"activationEvents":["onLanguage:sql","onLanguage:sqlite","onLanguage:db","onCommand:sqlite.showOutputChannel","onCommand:sqlite.explorer.add","onCommand:sqlite.explorer.remove","onCommand:sqlite.newQuery","onCommand:sqlite.quickQuery","onCommand:sqlite.useDatabase","onCommand:sqlite.runDocumentQuery"],"main":"./dist/extension","contributes":{"commands":[{"command":"sqlite.changeWorkspaceTrust","title":"Change Workspace Trust","category":"SQLite"},{"command":"sqlite.showOutputChannel","title":"Show Output","category":"SQLite"},{"command":"sqlite.explorer.add","title":"Open Database","category":"SQLite"},{"command":"sqlite.explorer.remove","title":"Close Database","category":"SQLite"},{"command":"sqlite.explorer.refresh","title":"Refresh Databases","category":"SQLite","icon":{"light":"resources/light/refresh.svg","dark":"resources/dark/refresh.svg"}},{"command":"sqlite.explorer.copyName","title":"Copy Name","category":"SQLite"},{"command":"sqlite.explorer.copyPath","title":"Copy Path","category":"SQLite"},{"command":"sqlite.explorer.copyRelativePath","title":"Copy Relative Path","category":"SQLite"},{"command":"sqlite.useDatabase","title":"Use Database","category":"SQLite"},{"command":"sqlite.newQuery","title":"New Query","category":"SQLite","icon":{"light":"resources/light/newquery.svg","dark":"resources/dark/newquery.svg"}},{"command":"sqlite.newQuerySelect","title":"New Query [Select]","category":"SQLite","icon":{"light":"resources/light/newquery.svg","dark":"resources/dark/newquery.svg"}},{"command":"sqlite.newQueryInsert","title":"New Query [Insert]","category":"SQLite"},{"command":"sqlite.quickQuery","title":"Quick Query","category":"SQLite"},{"command":"sqlite.runDocumentQuery","title":"Run Query","category":"SQLite"},{"command":"sqlite.runSelectedQuery","title":"Run Selected Query","category":"SQLite"},{"command":"sqlite.runTableQuery","title":"Show Table","category":"SQLite","icon":{"light":"resources/light/runquery.svg","dark":"resources/dark/runquery.svg"}},{"command":"sqlite.runSqliteMasterQuery","title":"Show Table \'sqlite_master\'","category":"SQLite","icon":{"light":"resources/light/runquery.svg","dark":"resources/dark/runquery.svg"}}],"keybindings":[{"command":"sqlite.runDocumentQuery","key":"ctrl+shift+q","mac":"cmd+shift+q","when":"editorLangId =~ /(sql|sqlite)/"}],"views":{"explorer":[{"id":"sqlite.explorer","name":"SQLite Explorer","when":"sqlite.explorer.show","icon":"resources/dark/database.svg"}]},"menus":{"commandPalette":[{"command":"sqlite.showOutputChannel","group":"sqlite"},{"command":"sqlite.explorer.add","group":"sqlite"},{"command":"sqlite.explorer.remove","group":"sqlite","when":"sqlite.explorer.show"},{"command":"sqlite.explorer.refresh","group":"sqlite","when":"sqlite.explorer.show"},{"command":"sqlite.newQuery","group":"sqlite"},{"command":"sqlite.quickQuery","group":"sqlite"},{"command":"sqlite.runDocumentQuery","when":"editorLangId =~ /(sql|sqlite)/","group":"sqlite"},{"command":"sqlite.runSelectedQuery","when":"editorLangId =~ /(sql|sqlite)/","group":"sqlite"},{"command":"sqlite.useDatabase","when":"editorLangId =~ /(sql|sqlite)/","group":"sqlite"},{"command":"sqlite.runSqliteMasterQuery","when":"false"},{"command":"sqlite.runTableQuery","when":"false"},{"command":"sqlite.explorer.copyName","group":"sqlite","when":"false"},{"command":"sqlite.explorer.copyPath","group":"sqlite","when":"false"},{"command":"sqlite.explorer.copyRelativePath","group":"sqlite","when":"false"},{"command":"sqlite.newQuerySelect","group":"sqlite","when":"false"},{"command":"sqlite.newQueryInsert","group":"sqlite","when":"false"}],"explorer/context":[{"command":"sqlite.explorer.add","when":"resourceLangId == db && !explorerResourceIsFolder","group":"navigation@1"},{"command":"sqlite.newQuery","when":"resourceLangId == db","group":"0_sqlite@1"}],"editor/context":[{"when":"editorTextFocus && editorLangId =~ /(sql|sqlite)/","command":"sqlite.runDocumentQuery","group":"9.1_sqlite@1"},{"when":"editorTextFocus && editorLangId =~ /(sql|sqlite)/","command":"sqlite.runSelectedQuery","group":"9.1_sqlite@2"},{"when":"editorTextFocus && editorLangId =~ /(sql|sqlite)/","command":"sqlite.useDatabase","group":"9.1_sqlite@3"}],"view/title":[{"command":"sqlite.newQuery","when":"view == sqlite.explorer","group":"navigation@1"},{"command":"sqlite.explorer.refresh","when":"view == sqlite.explorer","group":"navigation@2"}],"view/item/context":[{"command":"sqlite.newQuery","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"inline@1"},{"command":"sqlite.runSqliteMasterQuery","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"1_query@1"},{"command":"sqlite.newQuery","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"2_sql@1"},{"command":"sqlite.explorer.copyPath","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"3_copy@1"},{"command":"sqlite.explorer.copyRelativePath","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"3_copy@2"},{"command":"sqlite.explorer.remove","when":"view == sqlite.explorer && viewItem == sqlite.databaseItem","group":"4_utils@1"},{"command":"sqlite.runTableQuery","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"inline@1"},{"command":"sqlite.runTableQuery","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"1_query@1"},{"command":"sqlite.newQuerySelect","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"2_sql@1"},{"command":"sqlite.newQueryInsert","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"2_sql@2"},{"command":"sqlite.explorer.copyName","when":"view == sqlite.explorer && viewItem == sqlite.tableItem","group":"3_copy@1"},{"command":"sqlite.explorer.copyName","when":"view == sqlite.explorer && viewItem == sqlite.columnItem","group":"3_copy@1"}]},"languages":[{"id":"sqlite","aliases":["SQLite","SQLite3"],"firstLine":"\\\\s*--\\\\s*(sql|SQL)ite","extensions":[".sql",".sql3"],"configuration":"./language-configuration.json"},{"id":"db","aliases":["Database"],"extensions":[".db",".db3",".sdb",".s3db",".sqlite",".sqlite3"]}],"grammars":[{"language":"sqlite","scopeName":"source.sql.sqlite","path":"./syntaxes/sqlite.tmLanguage.json"}],"configuration":{"type":"object","title":"SQLite Configuration","properties":{"sqlite.sqlite3":{"type":"string","default":"sqlite3","description":"SQLite3 command or executable path."},"sqlite.logLevel":{"type":"string","enum":["DEBUG","INFO","WARN","ERROR"],"default":"INFO","description":"Logging level in the output channel (DEBUG, INFO, WARN, ERROR)"},"sqlite.recordsPerPage":{"type":"number","default":50,"minimum":-1,"description":"Number of records to show per page. (-1 to show all records)"},"sqlite.databaseExtensions":{"type":"array","items":{"type":"string"},"default":["db","db3","sdb","s3db","sqlite","sqlite3"],"description":"The file extensions recognized as SQLite database."}}}},"scripts":{"vscode:prepublish":"webpack --mode production && npm run prepublish-html","compile":"webpack --mode development","watch":"webpack --mode development --watch","test":"jest --silent --config jest.config.js","install-html":"cd ./src/resultview/html && npm install","prepublish-html":"cd ./src/resultview/html && npm run prepublish","build-html":"cd ./src/resultview/html && npm run build","test-html":"cd ./src/resultview/html && npm run test","watch-html":"cd ./src/resultview/html && npm run watch","package":"vsce package"},"devDependencies":{"@types/jest":"~25.2.0","@types/node":"^7.0.43","@types/sqlite3":"^3.1.4","@types/vscode":"1.30.0","jest":"~25.2.0","sqlite3":"~4.1.0","ts-jest":"~25.2.0","ts-loader":"^7.0.3","tslint":"~6.1.0","typescript":"~3.2.4","vsce":"^1.75.0","webpack":"^4.43.0","webpack-cli":"^3.3.11"},"dependencies":{"csv-parser":"~2.3.0","csv-stringify":"~5.3.0"}}')},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(10),n=s(7),i=s(4),o=s(22),a=(...e)=>{},l=i.randomString(8);t.CliDatabase=class{constructor(e,t,s){this.command=e,this.path=t;let i=["-csv","-header","-bail","-nullvalue","NULL"];this._started=!1,this._ended=!1,this.errStr="",this.rows=[],this.execQueue=[],this.busy=!1,this.startCallback=s,this.csvParser=o({separator:",",strict:!1,headers:!1});try{this.sqliteProcess=r.spawn(this.command,i,{stdio:["pipe","pipe","pipe"]})}catch(e){let t=new Error("SQLite process failed to start: "+e.message);return void setTimeout(()=>this.onStartError(t),0)}this.sqliteProcess.once("error",e=>{let t=new Error("SQLite process failed to start: "+e.message);this.onStartError(t)});const u=`"${this.path.replace(/\\/g,"/")}"`;try{this._write(`.open ${u}${n.EOL}`),this._write("select 1 from sqlite_master;"+n.EOL),this._write(`.print ${l}${n.EOL}`),this.busy=!0}catch(e){return void setTimeout(()=>this.onStartError(e),0)}this.sqliteProcess.once("exit",(e,t)=>{this.onExit(e,t)}),this.sqliteProcess.stderr.on("data",e=>{this.onError(e)}),this.sqliteProcess.stdout.pipe(this.csvParser).on("data",e=>{this.onData(e)}),this.sqliteProcess.stdin.once("error",a),this.sqliteProcess.stdout.once("error",a),this.csvParser.once("error",a)}close(e){if(this._ended)e&&e(new Error("SQLite process already ended."));else try{this._ended=!0,this.endCallback=e,this.execQueue.push({sql:".exit"}),this.busy||this.next()}catch(e){}}execute(e,t){if(this._ended)t&&t([],new Error("SQLite process already ended."));else if(!(e=e.trim()).startsWith(".")){if(e.toLowerCase().startsWith("explain")){let t="explain".length;e=e.slice(0,t)+" "+e.slice(t)}try{this.execQueue.push({sql:e,callback:t}),this.busy||this.next()}catch(e){}}}_write(e){if(this.sqliteProcess){e.endsWith("\n")||(e+="\n");try{this.sqliteProcess.stdin.write(e)}catch(e){}}}onStartError(e){this._started=!1,this.csvParser.end(),this.startCallback&&(this.startCallback(e),this.startCallback=void 0)}onExit(e,t){this._ended=!0,this.csvParser.end(),this._started?(0===e||(1===e||t)&&this.writeCallback&&this.writeCallback([],new Error(this.errStr)),this.endCallback&&this.endCallback()):this.startCallback&&this.startCallback(new Error(this.errStr))}onData(e){if(this.errStr)return;let t=Object.values(e);if(1===t.length&&t[0]===l)return this._started||(this._started=!0),this.writeCallback&&this.writeCallback(this.rows),void this.next();this.rows.push(t)}onError(e){if(e&&!e.toString().match(/\: \/lib64\/libtinfo\.so\.[0-9]+: no version information available \(required by /)&&(this.errStr+=e.toString(),this.errStr.endsWith("\n"))){let e=this.errStr.match(/Error: near line [0-9]+:(?: near "(.+)":)? (.+)/);if(e){let t=e[1],s=e[2];this.errStr=`${t?`near "${t}": `:""}${s}`}}}next(){this.rows=[];let e=this.execQueue.shift();e?(this._write(e.sql),this._write(`.print ${l}${n.EOL}`),this.busy=!0,this.writeCallback=e.callback):this.busy=!1}get ended(){return this._ended}get started(){return this._started}}},function(e,t){e.exports=require("child_process")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keywords=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","ANALYZE","AND","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FOR","FOREIGN","FROM","FULL","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LEFT","LIKE","LIMIT","MATCH","NATURAL","NO","NOT","NOTNULL","NULL","OF","OFFSET","ON","OR","ORDER","OUTER","PLAN","PRAGMA","PRIMARY","QUERY","RAISE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RIGHT","ROLLBACK","ROW","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TO","TRANSACTION","TRIGGER","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WITH","WITHOUT"]},function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("fs")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(29);t.extractStatements=function(e){let t,s=[],n=!1,i=!1,o=!1,a=!1,l="",u="",c=e.split(/\r?\n/);for(let e=0;e<c.length;e++){let d=c[e];for(let c=0;c<d.length;c++){let h=d[c],m=c>0?d[c-1]:void 0,p=c<d.length-1?d[c+1]:void 0;if(n)t&&(t.sql+=h),i||";"!==h?i||"'"!==h?i||'"'!==h?i&&h===u&&(i=!1,u=""):(i=!0,u='"'):(i=!0,u="'"):(n=!1,t&&(t.position.end=[e,c],s.push(t),t=void 0));else if(o&&"-"===l);else if(o&&"/"===l)"/"===h&&"*"===m&&(o=!1,l="");else if(a)t&&(t.sql+=h);else if(" "===h||"\t"===h);else if("-"===h&&"-"===p)o=!0,l="-";else if("/"===h&&"*"===p)o=!0,l="/";else if("."===h)a=!0,t={sql:h,position:{start:[e,c],end:[e,c]},type:r.StatementType.COMMAND};else{if(!h.match(/\w/))throw Error("Not a valid query");n=!0,t={sql:h,position:{start:[e,c],end:[e,c]},type:r.StatementType.OTHER}}}a&&(a=!1,t&&(t.position.end=[e,d.length-1],s.push(t),t=void 0)),o&&"-"===l&&(o=!1,l=""),n&&t&&(t.sql+="\n")}return t&&0===s.length&&(t.sql=t.sql.trim()+";",s.push(t)),s.forEach(e=>e.type=function(e){let t;t=(e=e.toLowerCase()).startsWith(r.StatementType.SELECT.toLowerCase())?r.StatementType.SELECT:e.startsWith(r.StatementType.INSERT.toLowerCase())?r.StatementType.INSERT:e.startsWith(r.StatementType.UPDATE.toLowerCase())?r.StatementType.UPDATE:e.startsWith(r.StatementType.EXPLAIN.toLowerCase())?r.StatementType.EXPLAIN:e.startsWith(r.StatementType.PRAGMA.toLowerCase())?r.StatementType.PRAGMA:e.startsWith(".")?r.StatementType.COMMAND:r.StatementType.OTHER;return t}(e.sql)),s}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(1),i=s(16),o=s(6),a=s(17),l=s(20),u=s(35),c=s(42),d=s(44),h=s(2),m=s(47),p=s(48),f=s(49),g=s(51),w=s(52),y=s(53),b=s(54);let v,q,x,C,E,S,T=new Array;t.activate=function(e){n.logger.info(`Activating extension ${o.Constants.extensionName} v${o.Constants.extensionVersion}...`),v=i.getConfiguration(e),n.logger.setLogLevel(v.logLevel),e.subscriptions.push(r.commands.registerCommand(h.Commands.reloadSettings,()=>{v=i.getConfiguration(e),n.logger.setLogLevel(v.logLevel),C.setSqliteCommand(v.sqlite3);for(let e of T)b.isConfigurationChangeAware(e)&&e.onConfigurationChange(v)})),e.subscriptions.push(r.workspace.onDidChangeConfiguration(()=>{r.commands.executeCommand(h.Commands.reloadSettings)})),x=new a.default,C=new l.default(e.extensionPath,v.sqlite3),S=new u.default(e.extensionPath),q=new c.default,E=new d.default(e),q.setSchemaProvider(e=>{let t=x.getDocumentDatabase(e);return t?C.schema(t):Promise.resolve()}),e.subscriptions.push(q,x,C,E,S),T.push(new m.WorkspaceTrustCommandsHandler(e),new p.OutputChannelCommandsHandler,new f.ClipboardCommandsHandler,new g.SqlDocumentCommandsHandler(x,v.databaseExtensions),new w.RunQueryCommandsHandler(x,C,S,v.recordsPerPage,v.databaseExtensions),new y.ExplorerCommandsHandler(E,C,v.databaseExtensions));for(let t of T)t.activate(e);return n.logger.info("Extension activated."),Promise.resolve(!0)},t.deactivate=function(){for(let e of T)e.deactivate();T=new Array}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(2),i=s(1),o=s(8).contributes.configuration.properties;function a(e){(function(e){const t=r.workspace.getConfiguration().inspect(e);return!!t&&(null!=t.workspaceFolderValue||null!=t.workspaceValue)})("sqlite.sqlite3")&&null==e.workspaceState.get("isTrustedWorkspace")&&r.commands.executeCommand(n.Commands.askWorkspaceTrust);return function(e,t,s){const n=r.workspace.getConfiguration().inspect(e);return n?s&&null!=n.workspaceFolderValue?n.workspaceFolderValue:s&&null!=n.workspaceValue?n.workspaceValue:null!=n.globalValue?n.globalValue:null!=n.defaultValue?n.defaultValue:t:t}("sqlite.sqlite3","",e.workspaceState.get("isTrustedWorkspace",!1))}function l(){let e=r.workspace.getConfiguration().get("sqlite.logLevel"),t=o["sqlite.logLevel"].default;return e&&null!=i.Level[""+e]&&(t=e.toString()),t}function u(){let e=r.workspace.getConfiguration().get("sqlite.recordsPerPage"),t=o["sqlite.recordsPerPage"].default;if("string"==typeof e){let s=Number.parseInt(e);s>=-1&&(t=s)}else"number"==typeof e&&e>=-1&&(t=e);return t}function c(){let e=o["sqlite.databaseExtensions"].default||[],t=r.workspace.getConfiguration().get("sqlite.databaseExtensions",[])||[];return[...new Set(t.concat(...e))]}t.getConfiguration=function(e){return{sqlite3:a(e),logLevel:l(),recordsPerPage:u(),databaseExtensions:c()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(18),i=s(19);t.default=class{constructor(){let e=[];this.documentDatabaseBindings=new n.DocumentDatabaseBindings,this.databaseStatusBarItem=new i.DatabaseStatusBarItem(this.documentDatabaseBindings),e.push(this.documentDatabaseBindings),e.push(this.databaseStatusBarItem),this.disposable=r.Disposable.from(...e)}bindDatabaseToDocument(e,t){let s=this.documentDatabaseBindings.bind(t,e);return s&&this.databaseStatusBarItem.update(),s}getDocumentDatabase(e){return this.documentDatabaseBindings.get(e)}dispose(){this.disposable.dispose()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DocumentDatabaseBindings=class{constructor(){this.bindings={}}bind(e,t){return!!e&&(this.bindings[e.uri.toString()]=t,!0)}get(e){return e?this.bindings[e.uri.toString()]:void 0}unbind(e){Object.keys(this.bindings).forEach(t=>{this.bindings[t]===e&&delete this.bindings[t]})}dispose(){}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(3);t.DatabaseStatusBarItem=class{constructor(e){this.documentDatabase=e;let t=[];this.statusBarItem=r.window.createStatusBarItem(r.StatusBarAlignment.Right,100),this.statusBarItem.command="sqlite.useDatabase",t.push(this.statusBarItem),t.push(r.window.onDidChangeActiveTextEditor(e=>this.update())),t.push(r.window.onDidChangeTextEditorViewColumn(e=>this.update())),t.push(r.workspace.onDidOpenTextDocument(e=>this.update())),t.push(r.workspace.onDidCloseTextDocument(e=>this.update())),this.disposable=r.Disposable.from(...t)}update(){let e=!r.window.activeTextEditor||"sql"!==r.window.activeTextEditor.document.languageId&&"sqlite"!==r.window.activeTextEditor.document.languageId?void 0:r.window.activeTextEditor.document;if(e){let t,s,r=this.documentDatabase.get(e);r?(t=r,s=n.basename(t)):(t="No database",s=t),this.statusBarItem.tooltip="SQLite: "+t,this.statusBarItem.text="SQLite: "+s,this.statusBarItem.show()}else this.statusBarItem.hide()}dispose(){this.disposable.dispose()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(21),n=s(28),i=s(30),o=s(1),a=s(5),l=s(2);t.default=class{constructor(e,t){this.extensionPath=e,this.setSqliteCommand(t)}query(e,t){return this.sqliteCommand||Promise.resolve({error:"Unable to execute query: provide a valid sqlite3 executable in the setting sqlite.sqlite3."}),n.executeQuery(this.sqliteCommand,e,t)}schema(e){return this.sqliteCommand||Promise.resolve({error:"Unable to execute query: provide a valid sqlite3 executable in the setting sqlite.sqlite3."}),Promise.resolve(r.Schema.build(e,this.sqliteCommand))}dispose(){}setSqliteCommand(e){try{this.sqliteCommand=i.validateSqliteCommand(e,this.extensionPath)}catch(e){o.logger.error(e.message),a.showErrorMessage(e.message,{title:"Show output",command:l.Commands.showOutputChannel}),this.sqliteCommand=""}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(9),n=s(27),i=s(1);!function(e){e.build=function(e,t){return new Promise((s,o)=>{if(!n.isFileSync(e))return o(new Error(`Failed to retrieve database schema: '${e}' is not a file`));let a={path:e,tables:[]};let l=new r.CliDatabase(t,e,e=>{o(e)});l.execute("SELECT name, type FROM sqlite_master\n                                WHERE (type=\"table\" OR type=\"view\")\n                                AND name <> 'sqlite_sequence'\n                                AND name <> 'sqlite_stat1'\n                                ORDER BY type ASC, name ASC;",(t,r)=>{if(r)return o(r);t.shift(),a.tables=t.map(t=>({database:e,name:t[0],type:t[1],columns:[]}));for(let t of a.tables){let s=`PRAGMA table_info('${t.name}');`;l.execute(s,(s,r)=>{if(r){const e=`Error retrieving '${t.name}' schema: ${r}`;return void i.logger.warn(e)}if(s.length<2)return;let n=s.shift()||[];t.columns=s.map(s=>({database:e,table:t.name,name:s[n.indexOf("name")],type:s[n.indexOf("type")].toUpperCase(),notnull:"1"===s[n.indexOf("notnull")],pk:Number(s[n.indexOf("pk")])||0,defVal:s[n.indexOf("dflt_value")]}))})}l.close(()=>{s(a)})})})}}(t.Schema||(t.Schema={}))},function(e,t,s){const{Transform:r}=s(12),n=s(23),i=s(24),[o]=n("\r"),[a]=n("\n"),l={escape:'"',headers:null,mapHeaders:({header:e})=>e,mapValues:({value:e})=>e,newline:"\n",quote:'"',raw:!1,separator:",",skipComments:!1,skipLines:null,maxRowBytes:Number.MAX_SAFE_INTEGER,strict:!1};class u extends r{constructor(e={}){super({objectMode:!0,highWaterMark:16}),Array.isArray(e)&&(e={headers:e});const t=Object.assign({},l,e);t.customNewline=t.newline!==l.newline;for(const e of["newline","quote","separator"])void 0!==t[e]&&([t[e]]=n(t[e]));t.escape=(e||{}).escape?n(t.escape)[0]:t.quote,this.state={empty:t.raw?i(0):"",escaped:!1,first:!0,lineNumber:0,previousEnd:0,rowLength:0,quoted:!1},this._prev=null,!1===t.headers&&(t.strict=!1),(t.headers||!1===t.headers)&&(this.state.first=!1),this.options=t,this.headers=t.headers}parseCell(e,t,s){const{escape:r,quote:n}=this.options;e[t]===n&&e[s-1]===n&&(t++,s--);let i=t;for(let o=t;o<s;o++)e[o]===r&&o+1<s&&e[o+1]===n&&o++,i!==o&&(e[i]=e[o]),i++;return this.parseValue(e,t,i)}parseLine(e,t,s){const{customNewline:r,escape:i,mapHeaders:a,mapValues:l,quote:u,separator:c,skipComments:d,skipLines:h}=this.options;s--,!r&&e.length&&e[s-1]===o&&s--;const m=c,p=[];let f=!1,g=t;if(d){const s="string"==typeof d?d:"#";if(e[t]===n(s)[0])return}const w=e=>{if(this.state.first)return e;const t=p.length,s=this.headers[t];return l({header:s,index:t,value:e})};for(let r=t;r<s;r++){const t=!f&&e[r]===u,n=f&&e[r]===u&&r+1<=s&&e[r+1]===m,o=f&&e[r]===i&&r+1<s&&e[r+1]===u;if(t||n)f=!f;else if(o)r++;else if(e[r]===m&&!f){let t=this.parseCell(e,g,r);t=w(t),p.push(t),g=r+1}}if(g<s){let t=this.parseCell(e,g,s);t=w(t),p.push(t)}e[s-1]===m&&p.push(w(this.state.empty));const y=h&&h>this.state.lineNumber;if(this.state.lineNumber++,this.state.first&&!y)return this.state.first=!1,this.headers=p.map((e,t)=>a({header:e,index:t})),void this.emit("headers",this.headers);if(!y&&this.options.strict&&p.length!==this.headers.length){const e=new RangeError("Row length does not match headers");this.emit("error",e)}else y||this.writeRow(p)}parseValue(e,t,s){return this.options.raw?e.slice(t,s):e.toString("utf-8",t,s)}writeRow(e){(!1===this.headers||e.length>this.headers.length)&&(this.headers=e.map((e,t)=>t));const t=e.reduce((e,t,s)=>{const r=this.headers[s];return null!==r&&(e[r]=t),e},{});this.push(t)}_flush(e){if(this.state.escaped||!this._prev)return e();this.parseLine(this._prev,this.state.previousEnd,this._prev.length+1),e()}_transform(e,t,s){"string"==typeof e&&(e=n(e));const{escape:r,quote:i}=this.options;let l=0,u=e;this._prev&&(l=this._prev.length,u=Buffer.concat([this._prev,e]),this._prev=null);const c=u.length;for(let e=l;e<c;e++){const t=u[e],n=e+1<c?u[e+1]:null;if(this.state.rowLength++,this.state.rowLength>this.options.maxRowBytes)return s(new Error("Row exceeds the maximum size"));this.state.escaped||t!==r||n!==i||e===l?t!==i?this.state.quoted||(this.state.first&&!this.options.customNewline&&(t===a?this.options.newline=a:t===o&&n!==a&&(this.options.newline=o)),t===this.options.newline&&(this.parseLine(u,this.state.previousEnd,e+1),this.state.previousEnd=e+1,this.state.rowLength=0)):this.state.escaped?this.state.escaped=!1:this.state.quoted=!this.state.quoted:this.state.escaped=!0}return this.state.previousEnd===c?(this.state.previousEnd=0,s()):c-this.state.previousEnd<e.length?(this._prev=e,this.state.previousEnd-=c-e.length,s()):(this._prev=u,void s())}}e.exports=e=>new u(e)},function(e,t){var s=Object.prototype.toString,r="function"==typeof Buffer.alloc&&"function"==typeof Buffer.allocUnsafe&&"function"==typeof Buffer.from;e.exports=function(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return i=e,"ArrayBuffer"===s.call(i).slice(8,-1)?function(e,t,s){t>>>=0;var n=e.byteLength-t;if(n<0)throw new RangeError("'offset' is out of bounds");if(void 0===s)s=n;else if((s>>>=0)>n)throw new RangeError("'length' is out of bounds");return r?Buffer.from(e.slice(t,t+s)):new Buffer(new Uint8Array(e.slice(t,t+s)))}(e,t,n):"string"==typeof e?function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Buffer.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');return r?Buffer.from(e,t):new Buffer(e,t)}(e,t):r?Buffer.from(e):new Buffer(e);var i}},function(e,t,s){var r=s(25),n=s(26);e.exports=function(e,t,s){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');if(Buffer.alloc)return Buffer.alloc(e,t,s);var i=n(e);return 0===e?i:void 0===t?r(i,0):("string"!=typeof s&&(s=void 0),r(i,t,s))}},function(e,t){var s=function(){try{if(!Buffer.isEncoding("latin1"))return!1;var e=Buffer.alloc?Buffer.alloc(4):new Buffer(4);return e.fill("ab","ucs2"),"61006200"===e.toString("hex")}catch(e){return!1}}();function r(e,t,s,r){if(s<0||r>e.length)throw new RangeError("Out of range index");return s>>>=0,(r=void 0===r?e.length:r>>>0)>s&&e.fill(t,s,r),e}e.exports=function(e,t,n,i,o){if(s)return e.fill(t,n,i,o);if("number"==typeof t)return r(e,t,n,i);if("string"==typeof t){if("string"==typeof n?(o=n,n=0,i=e.length):"string"==typeof i&&(o=i,i=e.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("latin1"===o&&(o="binary"),"string"==typeof o&&!Buffer.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(""===t)return r(e,0,n,i);if(function(e){return 1===e.length&&e.charCodeAt(0)<256}(t))return r(e,t.charCodeAt(0),n,i);t=new Buffer(t,o)}return Buffer.isBuffer(t)?function(e,t,s,r){if(s<0||r>e.length)throw new RangeError("Out of range index");if(r<=s)return e;s>>>=0,r=void 0===r?e.length:r>>>0;for(var n=s,i=t.length;n<=r-i;)t.copy(e,n),n+=i;return n!==r&&t.copy(e,n,0,r-n),e}(e,t,n,i):r(e,0,n,i)}},function(e,t){e.exports=function(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative');return Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(13);t.isDirectorySync=function(e){try{return r.lstatSync(e).isDirectory()}catch(e){return!1}},t.isFileSync=function(e){try{return r.lstatSync(e).isFile()}catch(e){return!1}},t.fileExists=function(e){return new Promise((t,s)=>{r.exists(e,e=>{t(e)})})},t.fileExistsSync=function(e){return r.existsSync(e)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(9),n=s(14),i=s(1);t.executeQuery=function(e,t,s,o={sql:[]}){if(!e)return Promise.reject(new Error(`Unable to execute query: SQLite command is not valid: '${e}'`));let a;i.logger.debug(`SQLite3 command: '${e}'`),i.logger.debug(`Database path: '${t}'`),i.logger.debug("Query: "+s);try{a=n.extractStatements(s)}catch(e){return Promise.reject("Unable to execute query: "+e.message)}i.logger.debug("Statements:\n"+JSON.stringify(a));let l,u=[];return new Promise((s,n)=>{let i;i=new r.CliDatabase(e,t,e=>{n(e)});for(let e of o.sql)i.execute(e,(t,s)=>{s&&n(new Error(`Failed to execute: '${e}': ${s.message}`))});for(let e of a)i.execute(e.sql,(t,s)=>{if(s)l=s;else{let s=t.length>1?t.shift():[];u.push({stmt:e.sql,header:s,rows:t})}});i.close(()=>{s({resultSet:u,error:l})})})}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COMMAND="COMMAND",e.PRAGMA="PRAGMA",e.SELECT="SELECT",e.UPDATE="UPDATE",e.INSERT="INSERT",e.EXPLAIN="EXPLAIN",e.OTHER="OTHER"}(t.StatementType||(t.StatementType={}))},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(10),n=s(1),i=s(7),o=s(3),a=s(13);function l(e){let t=r.spawnSync(e,["-version"]);if(t.error)return n.logger.debug(`'${e}' is not a valid SQLite command: ${t.error}`),!1;let s=t.stderr.toString(),i=t.stdout.toString();if(s&&!s.match(/\: \/lib64\/libtinfo\.so\.[0-9]+: no version information available \(required by /))return n.logger.debug(`'${e}' is not a valid SQLite command: ${s}`),!1;let o=i.match(/3\.(?:9|[0-9][0-9])\.[0-9]{1,2} [0-9]{4}\-[0-9]{2}\-[0-9]{2} [0-9]{2}\:[0-9]{2}\:[0-9]{2}/);return o||n.logger.debug(`'${e}' is not a valid SQLite command: version must be >= 3.9`),!!o}function u(e){let t,s=i.platform(),r=i.arch();switch(s){case"win32":t="sqlite-v3.26.0-win32-x86.exe";break;case"linux":t="x64"===r?"sqlite-v3.26.0-linux-x64":"sqlite-v3.26.0-linux-x86";break;case"darwin":t="sqlite-v3.26.0-osx-x86";break;default:n.logger.info("Fallback binary not found: system OS not recognized."),t=""}if(t){let s=o.join(e,"bin",t);return a.existsSync(s)?(n.logger.debug(`Fallback SQLite binary found: '${s}'.`),s):(n.logger.debug(`Fallback SQLite binary not found: '${s}' does not exist.`),"")}return""}t.validateSqliteCommand=function(e,t){let s=e&&l(e);if(s)return e;if(!(e=u(t)))throw new Error("Unable to find a valid SQLite command. Fallback binary not found.");if(s=l(e),s)return e;throw new Error("Unable to find a valid SQLite command. Fallback binary is not valid.")},t.isSqliteCommandValid=l,t.getSqliteBinariesPath=u},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(3);var i;function o(e,t,s){if(e&&t instanceof Array&&1===t.length){let e=t[0];return new Promise(t=>t(e))}return new Promise((n,i)=>{let o,a;!e||t instanceof Array||(o=new r.CancellationTokenSource,a=o.token,t.then(e=>{if(1===e.length){let t=e[0];n(t),o&&(o.cancel(),o.dispose())}})),r.window.showQuickPick(t,{placeHolder:s||""},a).then(e=>{n(e),o&&o.dispose()})})}!function(e){e.DatabaseItem=class{constructor(e,t){this.path=e,this.label=this.toLabel(e),this.description=t||e}toLabel(e){return":memory:"===e?e:r.workspace.workspaceFolders?n.relative(r.workspace.workspaceFolders[0].uri.fsPath,e):n.basename(e)}};e.FileDialogItem=class{constructor(){this.label="Choose database from file",this.description=""}};e.ErrorItem=class{constructor(e){this.label=e}}}(i=t.QuickPick||(t.QuickPick={})),t.pickWorkspaceDatabase=function(e,t=[],s=!0,n){t==[]&&(t=["db","db3","sqlite","sqlite3","sdb","s3db"]);const a=new Promise(e=>{r.workspace.findFiles("**/*.{"+t.join(",")+"}").then(t=>{let r=new i.FileDialogItem,n=t.map(e=>new i.DatabaseItem(e.fsPath));s&&n.push(new i.DatabaseItem(":memory:","sqlite in-memory database")),n.push(r),e(n)})});return new Promise((s,l)=>{o(e,a,n=n||"Choose a database.").then(e=>{e instanceof i.DatabaseItem?s(e.path):e instanceof i.FileDialogItem?r.window.showOpenDialog({filters:{Database:t}}).then(e=>{e?s(e[0].fsPath):s()}):s()})})},t.pickListDatabase=function(e,t){let s;return s=0===t.length?[]:t.map(e=>new i.DatabaseItem(e)),new Promise((t,r)=>{o(e,s,"Choose a database to close.").then(e=>{e instanceof i.DatabaseItem?t(e.path):r()})})},t.showAutoQuickPick=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);t.showQueryInputBox=function(e){const t={placeHolder:`Your query here (database: ${e})`};return r.window.showInputBox(t)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=new r.Position(0,0);t.createSqlDocument=function(e,t=n,s=!0){let i="-- SQLite\n"+e;return t=t.translate(1),r.workspace.openTextDocument({language:"sqlite",content:i}).then(e=>(s&&r.window.showTextDocument(e,r.ViewColumn.One).then(e=>{e.selection=new r.Selection(t,t)}),Promise.resolve(e)))},t.getEditorSqlDocument=function(){let e=r.window.activeTextEditor;return e&&("sql"===e.document.languageId||"sqlite"===e.document.languageId)?e.document:void 0},t.getEditorSelection=function(){return r.window.activeTextEditor?r.window.activeTextEditor.selection:void 0}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);function n(e,t){if(null==e)return Promise.resolve(e);for(let s of t)if(e===s.title)return s.command&&r.commands.executeCommand(s.command,s.args),Promise.resolve(s.title);return Promise.reject(`There is no action associated with the selected item '${e}'`)}t.showErrorMessage=function(e,...t){let s=t.map(e=>e.title);return r.window.showErrorMessage(e,...s).then(e=>n(e,t))},t.showWarningMessage=function(e,...t){let s=t.map(e=>e.title);return r.window.showWarningMessage(e,...s).then(e=>n(e,t))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(36),i=s(4),o=s(38),a=s(7);class l extends n.CustomView{constructor(e){super("resultview","SQLite"),this.extensionPath=e,this.msgQueue=[]}display(e,t){this.show(this.extensionPath,t),this.msgQueue=[],e.then(e=>{this.resultSet=e||[];const s=this.resultSet?this.resultSet:[];this.send({type:"FETCH_RESULTS",payload:s.map((e,s)=>({statement:e.stmt,columns:e.header,size:e.rows.length,rows:{rows:e.rows.slice(0,t),offset:0,limit:t,result:s}}))}),this.msgQueue&&this.msgQueue.forEach(this.handleMessage.bind(this))})}handleMessage(e){if(this.resultSet)switch(e.type){case"FETCH_RESULTS":{const e=this.resultSet?this.resultSet:[];this.send({type:"FETCH_RESULTS",payload:e.map(e=>({statement:e.stmt,columns:e.header,size:e.rows.length}))})}case"FETCH_ROWS":{const t=this.resultSet?this.resultSet[e.payload.result]:null,s=e.payload.offset,r=s+e.payload.limit;this.send({type:"FETCH_ROWS",payload:{result:e.payload.result,rows:t.rows.slice(s,r),offset:s,limit:e.payload.limit}})}case"EXPORT_RESULTS":{const t=e.payload.result?this.resultSet[e.payload.result]:this.resultSet,s=e.payload.format;"csv"===s&&this.exportCsv(t),"html"===s&&this.exportHtml(t),"json"===s&&this.exportJson(t)}}else this.msgQueue.push(e)}exportJson(e){let t=JSON.stringify(e);this.exportFile("json",t)}exportCsv(e){setTimeout(()=>{let t=[];if(Array.isArray(e))for(let s in e){let r=o(e[s].rows,{columns:e[s].header,header:!0});t.push(r)}else{let s=o(e.rows,{columns:e.header,header:!0});t.push(s)}this.exportFile("csv",t.join(a.EOL))},0)}exportHtml(e){let t=(e,t)=>{let s="<table>";return s+="<tr>"+e.map(e=>`<th>${i.sanitizeStringForHtml(e)}</th>`).join("")+"<tr>",s+=t.map(e=>`<tr>${e.map(e=>`<td>${i.sanitizeStringForHtml(e)}</td>`).join("")}</tr>`).join(""),s+="</table>",s};setTimeout(()=>{let s=[];if(Array.isArray(e))for(let r in e){let n=t(e[r].header,e[r].rows);s.push(n)}else{let r=t(e.header,e.rows);s.push(r)}this.exportFile("html",s.join(""))},0)}exportFile(e,t){r.workspace.openTextDocument({language:e,content:t}).then(e=>r.window.showTextDocument(e,r.ViewColumn.One)).then(()=>r.commands.executeCommand("workbench.action.files.saveAs"))}}t.default=l},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(37),i=s(3);class o extends n.EventEmitter{constructor(e,t){super(),this.type=e,this.title=t,this.resourceScheme="vscode-resource",this.resourcesPath=""}show(e,t){this.resourcesPath=i.join(e,"dist"),this.panel||this.init();const s=i.join(this.resourcesPath,"resultview.js");this.panel.webview.html=`\n            <html>\n                <head>\n                    <title>ResultView</title>\n                </head>\n                <body>\n                    <div id="root"></div>\n                    <script>const RECORDS_PER_PAGE=${t||20}<\/script>\n                    <script src="${this.panel.webview.asWebviewUri(r.Uri.file(s)).toString()}"><\/script>\n                </body>\n            </html>\n        `}send(e){this.panel&&this.panel.webview.postMessage(e)}handleMessage(e){throw new Error("Method not implemented")}dispose(){this.disposable&&this.disposable.dispose(),this.panel=void 0}init(){let e=[],t={enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[r.Uri.file(this.resourcesPath).with({scheme:this.resourceScheme})]};this.panel=r.window.createWebviewPanel(this.type,this.title,r.ViewColumn.Two,t),e.push(this.panel),e.push(this.panel.onDidDispose(()=>this.dispose())),e.push(this.panel.webview.onDidReceiveMessage(e=>{this.handleMessage(e)})),this.disposable=r.Disposable.from(...e)}}t.CustomView=o},function(e,t){e.exports=require("events")},function(e,t,s){var r,n;({StringDecoder:r}=s(39)),n=s(40),e.exports=function(e,t={}){var s,i,o,a,l;for(s=[],e instanceof Buffer&&(e=(new r).write(e)),(l=new n.Stringifier(t)).push=function(e){if(e)return s.push(e.toString())},i=0,o=e.length;i<o;i++)a=e[i],l.write(a);return l.end(),s.join("")}},function(e,t){e.exports=require("string_decoder")},function(e,t,s){var r,n,i,o,a,l,u,c,d,h,m,p,f,g,w,y;f=s(12),s(41),e.exports=function(){var e,t,s,n,i;return 3===arguments.length?(s=arguments[0],n=arguments[1],e=arguments[2]):2===arguments.length?(Array.isArray(arguments[0])?s=arguments[0]:n=arguments[0],"function"==typeof arguments[1]?e=arguments[1]:n=arguments[1]):1===arguments.length&&("function"==typeof arguments[0]?e=arguments[0]:Array.isArray(arguments[0])?s=arguments[0]:n=arguments[0]),null==n&&(n={}),i=new r(n),s&&process.nextTick((function(){var e,t,r;for(t=0,r=s.length;t<r;t++)e=s[t],i.write(e);return i.end()})),e&&(t=[],i.on("readable",(function(){var e,s;for(s=[];e=i.read();)s.push(t.push(e));return s})),i.on("error",(function(t){return e(t)})),i.on("end",(function(){return e(null,t.join(""))}))),i},r=class extends f.Transform{constructor(e={}){var t,s,r,n,i,o,a,l,u,c,d,h,m;for(l in super({writableObjectMode:!0,...e}),c={},e)m=e[l],c[y(l)]=m;if(null===c.delimiter||void 0===c.delimiter)c.delimiter=",";else if(Buffer.isBuffer(c.delimiter))c.delimiter=c.delimiter.toString();else if("string"!=typeof c.delimiter)throw new Error("Invalid Option: delimiter must be a buffer or a string, got "+JSON.stringify(c.delimiter));if(null===c.quote||void 0===c.quote)c.quote='"';else if(!0===c.quote)c.quote='"';else if(!1===c.quote)c.quote="";else if(Buffer.isBuffer(c.quote))c.quote=c.quote.toString();else if("string"!=typeof c.quote)throw new Error("Invalid Option: quote must be a boolean, a buffer or a string, got "+JSON.stringify(c.quote));if(null==c.quoted&&(c.quoted=!1),null==c.quoted_empty&&(c.quoted_empty=void 0),null==c.quoted_string&&(c.quoted_string=!1),null==c.eof&&(c.eof=!0),null===c.escape||void 0===c.escape)c.escape='"';else{if(Buffer.isBuffer(c.escape)&&(c.escape=c.escape.toString()),"string"!=typeof c.escape)throw new Error("Invalid Option: escape must be a buffer or a string, got "+JSON.stringify(c.escape));if(c.escape.length>1)throw new Error(`Invalid Option: escape must be one character, got ${c.escape.length} characters`)}if(null==c.header&&(c.header=!1),c.columns=this.normalize_columns(c.columns),null==c.cast&&(c.cast={}),void 0===c.quoted_match||null===c.quoted_match||!1===c.quoted_match?c.quoted_match=null:Array.isArray(c.quoted_match)||(c.quoted_match=[c.quoted_match]),c.quoted_match)for(a=0,u=(h=c.quoted_match).length;a<u;a++)if(o=(d=h[a])instanceof RegExp,!("string"==typeof d)&&!o)throw new Error("Invalid Option: quoted_match must be a string or a regex, got "+JSON.stringify(d));if(c.cast.bool&&(c.cast.boolean=c.cast.bool),null==(t=c.cast).boolean&&(t.boolean=function(e){return e?"1":""}),null==(s=c.cast).date&&(s.date=function(e){return""+e.getTime()}),null==(r=c.cast).number&&(r.number=function(e){return""+e}),null==(n=c.cast).object&&(n.object=function(e){return JSON.stringify(e)}),null==(i=c.cast).string&&(i.string=function(e){return e}),void 0===c.record_delimiter||null===c.record_delimiter)null==c.record_delimiter&&(c.record_delimiter="\n");else{if(Buffer.isBuffer(c.record_delimiter))c.record_delimiter=c.record_delimiter.toString();else if("string"!=typeof c.record_delimiter)throw new Error("Invalid Option: record_delimiter must be a buffer or a string, got "+JSON.stringify(c.record_delimiter));switch(c.record_delimiter){case"auto":c.record_delimiter=null;break;case"unix":c.record_delimiter="\n";break;case"mac":c.record_delimiter="\r";break;case"windows":c.record_delimiter="\r\n";break;case"ascii":c.record_delimiter="";break;case"unicode":c.record_delimiter="\u2028"}}this.options=c,this.state={stop:!1},this.info={records:0}}_transform(e,t,s){var r,n;if(!0!==this.state.stop){if(!Array.isArray(e)&&"object"!=typeof e)return this.state.stop=!0,s(Error("Invalid Record: expect an array or an object, got "+JSON.stringify(e)));if(0===this.info.records)if(Array.isArray(e)){if(!0===this.options.header&&!this.options.columns)return this.state.stop=!0,s(Error("Undiscoverable Columns: header option requires column option or object records"))}else null==(r=this.options).columns&&(r.columns=this.normalize_columns(Object.keys(e)));0===this.info.records&&this.headers();try{this.emit("record",e,this.info.records)}catch(e){return n=e,this.state.stop=!0,this.emit("error",n)}if(this.options.eof){if(null==(e=this.stringify(e)))return;e+=this.options.record_delimiter}else{if(null==(e=this.stringify(e)))return;(this.options.header||this.info.records)&&(e=this.options.record_delimiter+e)}return this.info.records++,this.push(e),s()}}_flush(e){return 0===this.info.records&&this.headers(),e()}stringify(e,t=!1){var s,r,n,i,a,l,c,d,h,m,p,f,g,w,y,b,v,q,x,C,E,S,T,P,_,I,k,R,O,L,D,A;if("object"!=typeof e)return e;if(({columns:r,header:f}=this.options),I=[],Array.isArray(e))for(r&&e.splice(r.length),g=w=0,b=e.length;w<b;g=++w){if(p=e[g],[h,A]=this.__cast(p,{index:g,column:g,records:this.info.records,header:t}),h)return void this.emit("error",h);I[g]=[A,p]}else if(r)for(g=y=0,R=r.length;0<=R?y<R:y>R;g=0<=R?++y:--y){if(p=o(e,r[g].key),[h,A]=this.__cast(p,{index:g,column:r[g].key,records:this.info.records,header:t}),h)return void this.emit("error",h);I[g]=[A,p]}else for(s in e){if(p=e[s],[h,A]=this.__cast(p,{index:g,column:r[g].key,records:this.info.records,header:t}),h)return void this.emit("error",h);I.push([A,p])}for(c="",g=v=0,O=I.length;0<=O?v<O:v>O;g=0<=O?++v:--v){if([A,p]=I[g],"string"==typeof A)q=this.options;else if(u(A)){if(({value:A,...q}=A),"string"!=typeof A&&null!=A)return void this.emit("error",Error("Invalid Casting Value: returned value must return a string, null or undefined, got "+JSON.stringify(A)));q={...this.options,...q}}else{if(null!=A)return void this.emit("error",Error("Invalid Casting Value: returned value must return a string, an object, null or undefined, got "+JSON.stringify(A)));q=this.options}if(({delimiter:d,escape:m,quote:x,quoted:C,quoted_empty:T,quoted_string:_,quoted_match:P,record_delimiter:k}=q),A){if("string"!=typeof A)return this.emit("error",Error("Formatter must return a string, null or undefined, got "+JSON.stringify(A))),null;l=d.length&&A.indexOf(d)>=0,i=""!==x&&A.indexOf(x)>=0,n=A.indexOf(m)>=0&&m!==x,a=A.indexOf(k)>=0,S=_&&"string"==typeof p,E=(E=P&&"string"==typeof p&&P.filter((function(e){return"string"==typeof e?-1!==A.indexOf(e):e.test(A)})))&&E.length>0,!0===(D=!0===i||l||a||C||S||E)&&!0===n&&(L="\\"===m?new RegExp(m+m,"g"):new RegExp(m,"g"),A=A.replace(L,m+m)),!0===i&&(L=new RegExp(x,"g"),A=A.replace(L,m+x)),!0===D&&(A=x+A+x),c+=A}else(!0===T||null==T&&""===p&&!1!==_)&&(c+=x+x);g!==I.length-1&&(c+=d)}return c}headers(){var e;if(this.options.header&&this.options.columns)return e=this.options.columns.map((function(e){return e.header})),e=this.options.eof?this.stringify(e,!0)+this.options.record_delimiter:this.stringify(e),this.push(e)}__cast(e,t){var s;s=typeof e;try{return"string"===s?[void 0,this.options.cast.string(e,t)]:"number"===s?[void 0,this.options.cast.number(e,t)]:"boolean"===s?[void 0,this.options.cast.boolean(e,t)]:e instanceof Date?[void 0,this.options.cast.date(e,t)]:"object"===s&&null!==e?[void 0,this.options.cast.object(e,t)]:[void 0,e,e]}catch(e){return[e]}}normalize_columns(e){var t,s,r;if(null==e)return null;if(null!=e){if("object"!=typeof e)throw Error('Invalid option "columns": expect an array or an object');e=Array.isArray(e)?function(){var s,r,n;for(n=[],s=0,r=e.length;s<r;s++)if("string"==typeof(t=e[s]))n.push({key:t,header:t});else{if("object"!=typeof t||null==t||Array.isArray(t))throw Error("Invalid column definition: expect a string or an object");if(!t.key)throw Error('Invalid column definition: property "key" is required');null==t.header&&(t.header=t.key),n.push(t)}return n}():function(){var t;for(s in t=[],e)r=e[s],t.push({key:s,header:r});return t}()}return e}},e.exports.Stringifier=r,u=function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)},y=function(e){return e.replace(/([A-Z])/g,(function(e,t,s){return"_"+t.toLowerCase()}))},i=".".charCodeAt(0),d=/\\(\\)?/g,p=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),h=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/,a=function(e){return Object.prototype.toString.call(e)},l=function(e,t){var s;return!Array.isArray(e)&&(!("number"!==(s=typeof e)&&"symbol"!==s&&"boolean"!==s&&null!=e&&!c(e))||(m.test(e)||!h.test(e)||null!=t&&e in Object(t)))},c=function(e){var t;return"symbol"===(t=typeof e)||"object"===t&&null!=e&&"[object Symbol]"===a(e)},g=function(e){var t;return t=[],e.charCodeAt(0)===i&&t.push(""),e.replace(p,(function(e,s,r,n){var i;return i=e,r?i=n.replace(d,"$1"):s&&(i=s.trim()),t.push(i)})),t},n=function(e,t){return Array.isArray(e)?e:l(e,t)?[e]:g(e)},w=function(e){var t,s;return"string"==typeof e||c(e)?e:null!=(t="0"===(s=""+e)&&1/e==-INFINITY)?t:{"-0":s}},o=function(e,t){var s,r;for(s=0,r=(t=Array.isArray(t)?t:n(t,e)).length;null!=e&&s<r;)e=e[w(t[s++])];return s&&s===r?e:void 0}},function(e,t){e.exports=require("util")},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(43);t.default=class{constructor(){this.subscriptions=[],this.completionProvider=new n.CompletionProvider({provideSchema:e=>this.schemaProvider?this.schemaProvider(e):Promise.resolve()});this.subscriptions.push(r.languages.registerCompletionItemProvider([{language:"sql"},{language:"sqlite"}],this.completionProvider,"."))}setSchemaProvider(e){this.schemaProvider=e}dispose(){r.Disposable.from(...this.subscriptions).dispose()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(11),i=s(4);t.CompletionProvider=class{constructor(e){this.schemaProvider=e,this.schemaMap={}}provideCompletionItems(e,t,s,r){let i=this.schemaMap[e.uri.fsPath];return(i?Promise.resolve(i):this.schemaProvider.provideSchema(e)).then(s=>{if(!s)return this.getKeywordCompletionItems(n.keywords);let i=[];if("."===r.triggerCharacter){let r=e.getWordRangeAtPosition(t.translate(0,-1)),n=e.getText(r),o=s?s.tables.find(e=>e.name===n):void 0;return i=o?this.getColumnCompletionItems(o.columns):this.getColumnCompletionItems(s.tables.reduce((e,t)=>e.concat(t.columns),[])),i}let o=this.getKeywordCompletionItems(n.keywords);return[...this.getTableCompletionsItems(s.tables),...this.getColumnCompletionItems(s.tables.reduce((e,t)=>e.concat(t.columns),[])),...o]})}getTableCompletionsItems(e=[]){return e.map(e=>new a(e.name))}getColumnCompletionItems(e=[],t=!0){let s=e.map(e=>new l(e.name));return t&&(s=i.uniqueBy(s,"label")),s}getKeywordCompletionItems(e){return e.map(e=>new o(e))}};class o extends r.CompletionItem{constructor(e){super(e,r.CompletionItemKind.Keyword)}}class a extends r.CompletionItem{constructor(e){super(e,r.CompletionItemKind.File),this.detail="table"}}class l extends r.CompletionItem{constructor(e){super(e,r.CompletionItemKind.Field),this.detail="column"}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(45),i=s(6);t.default=class{constructor(e){let t=[];this.explorerTreeProvider=new n.ExplorerTreeProvider(e),t.push(r.window.createTreeView(i.Constants.sqliteExplorerViewId,{treeDataProvider:this.explorerTreeProvider})),this.disposable=r.Disposable.from(...t)}add(e){this.explorerTreeProvider.addToTree(e)>0&&r.commands.executeCommand("setContext","sqlite.explorer.show",!0)}remove(e){0===this.explorerTreeProvider.removeFromTree(e)&&setTimeout(()=>{r.commands.executeCommand("setContext","sqlite.explorer.show",!1)},100)}list(){return this.explorerTreeProvider.getDatabaseList()}refresh(){this.explorerTreeProvider.refresh()}dispose(){this.disposable.dispose()}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(46);t.ExplorerTreeProvider=class{constructor(e){this._onDidChangeTreeData=new r.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.context=e,this.databaseList=[]}refresh(){this._onDidChangeTreeData.fire()}addToTree(e){let t=this.databaseList.findIndex(t=>t.path===e.path);return t<0?this.databaseList.push(e):this.databaseList[t]=e,this.refresh(),this.databaseList.length}removeFromTree(e){let t=this.databaseList.findIndex(t=>t.path===e);return t>-1&&this.databaseList.splice(t,1),this.refresh(),this.databaseList.length}getTreeItem(e){return"tables"in e?new n.DBItem(this.context,e.path):"columns"in e?new n.TableItem(this.context,e.name,e.type):new n.ColumnItem(this.context,e.name,e.type,e.notnull,e.pk,e.defVal)}getDatabaseList(){return this.databaseList}getChildren(e){return e?"tables"in e?e.tables:"columns"in e?e.columns:[]:this.databaseList}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(3);class i extends r.TreeItem{constructor(e,t,s,r){super(t,s),this.name=e,this.label=t,this.collapsibleState=s,this.command=r}}t.SQLItem=i;t.DBItem=class extends i{constructor(e,t,s){super(t,n.basename(t),r.TreeItemCollapsibleState.Collapsed,s),this.dbPath=t,this.iconPath={light:e.asAbsolutePath(n.join("resources","light","database.svg")),dark:e.asAbsolutePath(n.join("resources","dark","database.svg"))},this.contextValue="sqlite.databaseItem"}get tooltip(){return""+this.dbPath}};t.TableItem=class extends i{constructor(e,t,s,i){super(t,t,r.TreeItemCollapsibleState.Collapsed,i),this.type=s,this.contextValue="sqlite.tableItem";let o="table.svg";"view"===this.type&&(o="table_view.svg"),this.iconPath={light:e.asAbsolutePath(n.join("resources","light",o)),dark:e.asAbsolutePath(n.join("resources","dark",o))}}get tooltip(){return`${this.name}\n${"view"===this.type?"VIEW":"TABLE"}`}};t.ColumnItem=class extends i{constructor(e,t,s,i,o,a,l){super(t,t+" : "+s.toLowerCase(),r.TreeItemCollapsibleState.None,l),this.type=s,this.notnull=i,this.pk=o,this.defVal=a,this.contextValue="sqlite.columnItem";let u=i?"col_notnull.svg":"col_nullable.svg";u=o>0?"col_pk.svg":u,this.iconPath={light:e.asAbsolutePath(n.join("resources","light",u)),dark:e.asAbsolutePath(n.join("resources","dark",u))}}get tooltip(){let e=this.pk?"\nPRIMARY KEY":"",t=this.notnull?"\nNOT NULL":"",s="NULL"!==this.defVal?"\nDEFAULT: "+this.defVal:"";return`${this.name}\n${this.type}${e}${t}${s}`}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(2),i=s(5);t.WorkspaceTrustCommandsHandler=class{constructor(e){this.extensionContext=e}activate(e){e.subscriptions.push(r.commands.registerCommand(n.Commands.changeWorkspaceTrust,this.onChangeWorkspaceTrust,this),r.commands.registerCommand(n.Commands.askWorkspaceTrust,this.onAskWorkspaceTrust,this))}deactivate(){}onAskWorkspaceTrust(){this.hasWorkspaceTrustValue()||this.extensionContext.workspaceState.update("isTrustedWorkspace",!1);const e={title:"Trust this workspace",command:n.Commands.changeWorkspaceTrust,args:[!0]};return i.showWarningMessage('The workspace setting "sqlite.sqlite3" is disabled by default for the untrusted workspace. If you trust this workspace you can explicitly enable the workspace settings by running the command "SQLite: Change Workspace Trust".',{title:"Do nothing"},e)}onChangeWorkspaceTrust(e){let t=null!=e?e:!this.isTrustedWorkspace();this.extensionContext.workspaceState.update("isTrustedWorkspace",t).then(()=>{const e=t?"This workspace is trusted. Workspace settings are enabled.":"This workspace is not trusted. Workspace settings are disabled";return r.window.showInformationMessage(e),r.commands.executeCommand(n.Commands.reloadSettings)})}isTrustedWorkspace(){return this.extensionContext.workspaceState.get("isTrustedWorkspace",!1)}hasWorkspaceTrustValue(){return null!=this.extensionContext.workspaceState.get("isTrustedWorkspace")}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(2),i=s(1);t.OutputChannelCommandsHandler=class{activate(e){e.subscriptions.push(r.commands.registerCommand(n.Commands.showOutputChannel,()=>{i.logger.showOutput()}))}deactivate(){}}},function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?n(e.value):new s((function(t){t(e.value)})).then(o,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),i=s(2),o=s(50);t.ClipboardCommandsHandler=class{activate(e){e.subscriptions.push(n.commands.registerCommand(i.Commands.explorerCopyName,this.onExplorerCopyName,this),n.commands.registerCommand(i.Commands.explorerCopyPath,this.onExplorerCopyPath,this),n.commands.registerCommand(i.Commands.explorerCopyRelativePath,this.onExplorerCopyRelativePath,this))}deactivate(){}onExplorerCopyName(e){return r(this,void 0,void 0,(function*(){yield this.copyToClipboard(e.name)}))}onExplorerCopyPath(e){return r(this,void 0,void 0,(function*(){yield this.copyToClipboard(e.path)}))}onExplorerCopyRelativePath(e){return r(this,void 0,void 0,(function*(){let t=n.workspace.asRelativePath(e.path);yield this.copyToClipboard(t)}))}copyToClipboard(e){return r(this,void 0,void 0,(function*(){yield o.default.copy(e),n.window.setStatusBarMessage(`Copied '${e}' to clipboard.`,2e3)}))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0);var n;!function(e){e.copy=function(e){return Promise.resolve(r.env.clipboard.writeText(e))},e.read=function(){return Promise.resolve(r.env.clipboard.readText())}}(n||(n={})),t.default=n},function(e,t,s){"use strict";var r=this&&this.__awaiter||function(e,t,s,r){return new(s||(s=Promise))((function(n,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?n(e.value):new s((function(t){t(e.value)})).then(o,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n=s(0),i=s(2),o=s(4),a=s(5);t.SqlDocumentCommandsHandler=class{constructor(e,t){this.sqlWorkspace=e,this.databaseExtensions=t}onConfigurationChange(e){this.databaseExtensions=e.databaseExtensions}activate(e){e.subscriptions.push(n.commands.registerCommand(i.Commands.useDatabase,this.onUseDatabase,this),n.commands.registerCommand(i.Commands.newQuery,this.onNewQuery,this),n.commands.registerCommand(i.Commands.newQuerySelect,this.onNewQuerySelect,this),n.commands.registerCommand(i.Commands.newQueryInsert,this.onNewQueryInsert,this))}deactivate(){}onUseDatabase(){return r(this,void 0,void 0,(function*(){let e=a.getEditorSqlDocument(),t=yield a.pickWorkspaceDatabase(!1,this.databaseExtensions,!0);return e&&t&&this.sqlWorkspace.bindDatabaseToDocument(t,e),t}))}onNewQuery(e){return r(this,void 0,void 0,(function*(){const t=yield a.createSqlDocument("");return e&&this.sqlWorkspace.bindDatabaseToDocument(e.path,t),t.uri}))}onNewQuerySelect(e){return r(this,void 0,void 0,(function*(){let t="SELECT "+e.columns.map(e=>o.sqlSafeName(e.name)).join(", "),s=`FROM ${o.sqlSafeName(e.name)};`,r=t+"\n"+s,i=new n.Position(1,s.length-1);const l=yield a.createSqlDocument(r,i);return this.sqlWorkspace.bindDatabaseToDocument(e.database,l),l.uri}))}onNewQueryInsert(e){return r(this,void 0,void 0,(function*(){let t=`INSERT INTO ${o.sqlSafeName(e.name)} (${e.columns.map(e=>o.sqlSafeName(e.name)).join(", ")})`+"\nVALUES ();",s=new n.Position(1,"VALUES ();".length-2);const r=yield a.createSqlDocument(t,s);return this.sqlWorkspace.bindDatabaseToDocument(e.database,r),r.uri}))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(2),i=s(1),o=s(14),a=s(4),l=s(5);t.RunQueryCommandsHandler=class{constructor(e,t,s,r,n){this.sqlWorkspace=e,this.sqlite=t,this.resultView=s,this.recordsPerPage=r,this.databaseExtensions=n}onConfigurationChange(e){this.recordsPerPage=e.recordsPerPage,this.databaseExtensions=this.databaseExtensions}activate(e){e.subscriptions.push(r.commands.registerCommand(n.Commands.runDocumentQuery,this.onRunDocumentQuery,this),r.commands.registerCommand(n.Commands.runSelectedQuery,this.onRunSelectedQuery,this),r.commands.registerCommand(n.Commands.runTableQuery,this.onRunTableQuery,this),r.commands.registerCommand(n.Commands.runSqliteMasterQuery,this.onRunSqliteMasterQuery,this),r.commands.registerCommand(n.Commands.quickQuery,this.onQuickQuery,this))}deactivate(){}onRunDocumentQuery(){const e=l.getEditorSqlDocument();if(!e)return;const t=this.sqlWorkspace.getDocumentDatabase(e);if(t){const s=e.getText();this.runQuery(t,s)}else r.commands.executeCommand(n.Commands.useDatabase).then(()=>this.onRunDocumentQuery())}onRunSelectedQuery(){let e=l.getEditorSqlDocument();if(!e)return;let t=this.sqlWorkspace.getDocumentDatabase(e);if(t){let s=l.getEditorSelection(),i="";if(s)if(s.isEmpty){let t=e.getText(),n=o.extractStatements(t);for(let e of n){let t=new r.Position(e.position.start[0],e.position.start[1]),n=new r.Position(e.position.end[0],e.position.end[1]+1);if(new r.Range(t,n).contains(s)){i=e.sql;break}}}else i=e.getText(s);else i=e.getText();if(""!=i)this.runQuery(t,i);else{let e="No query selected.";l.showErrorMessage(e,{title:"Show output",command:n.Commands.showOutputChannel})}}else r.commands.executeCommand(n.Commands.useDatabase).then(()=>this.onRunSelectedQuery())}onRunTableQuery(e){let t=`SELECT * FROM ${a.sqlSafeName(e.name)};`;this.runQuery(e.database,t)}onRunSqliteMasterQuery(e){this.runQuery(e.path,"SELECT * FROM sqlite_master;")}onQuickQuery(){l.pickWorkspaceDatabase(!1,this.databaseExtensions,!0).then(e=>{e&&l.showQueryInputBox(e).then(t=>{t&&this.runQuery(e,t)})})}runQuery(e,t){let s=this.sqlite.query(e,t).then(({resultSet:e,error:t})=>(t&&(i.logger.error(t.message),l.showErrorMessage(t.message,{title:"Show output",command:n.Commands.showOutputChannel})),e));this.resultView.display(s,this.recordsPerPage)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(0),n=s(2),i=s(1),o=s(5);t.ExplorerCommandsHandler=class{constructor(e,t,s){this.sqlite=t,this.explorer=e,this.databaseExtensions=s}activate(e){e.subscriptions.push(r.commands.registerCommand(n.Commands.explorerAdd,this.onExplorerAdd,this),r.commands.registerCommand(n.Commands.explorerRemove,this.onExplorerRemove,this),r.commands.registerCommand(n.Commands.explorerRefresh,this.onExplorerRefresh,this))}deactivate(){}onConfigurationChange(e){this.databaseExtensions=e.databaseExtensions}onExplorerAdd(e){let t=e?e.fsPath:void 0;return t?this.sqlite.schema(t).then(e=>this.explorer.add(e),e=>{let s=`Failed to open database '${t}': ${e.message}`;i.logger.error(s),o.showErrorMessage(s,{title:"Show output",command:n.Commands.showOutputChannel})}):o.pickWorkspaceDatabase(!1,this.databaseExtensions,!1).then(e=>{if(e)return this.onExplorerAdd(r.Uri.file(e))},e=>{})}onExplorerRemove(e){if(e)return Promise.resolve(this.explorer.remove(e.path));{let e=this.explorer.list().map(e=>e.path);return o.pickListDatabase(!1,e).then(e=>{e&&this.explorer.remove(e)},e=>{})}}onExplorerRefresh(){let e=this.explorer.list();return Promise.all(e.map(e=>{let t=e.path;return this.sqlite.schema(t).then(e=>this.explorer.add(e),e=>{this.explorer.remove(t);let s="Failed to refresh database: "+e.message;i.logger.error(s),o.showErrorMessage(s,{title:"Show output",command:n.Commands.showOutputChannel})})}))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isConfigurationChangeAware=function(e){return"onConfigurationChange"in e&&e.onConfigurationChange instanceof Function}}]);
//# sourceMappingURL=extension.js.map